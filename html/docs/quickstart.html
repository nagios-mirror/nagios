<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.0 Transitional//EN">

<html>
<head>
<title>Quickstart Guide To Installing Nagios</title>

<STYLE type="text/css">
<!--
        .Default { font-family: verdana,arial,serif; font-size: 8pt; }
        .PageTitle { font-family: verdana,arial,serif; font-size: 16pt; font-weight: bold; }
-->      
</STYLE>

</head>

<body bgcolor="#FFFFFF" text="black" class="Default">

<p>
<div align="center">
<img src="images/nagios.jpg" border="0" alt="Nagios" title="Nagios">
<h2 class="PageTitle">Quickstart Guide To Installing Nagios</h2>
</div>
</p>

<hr>

<p>
<img src="images/upto.gif" border="0" align="absmiddle">Up To: <a href="toc.html">Contents</a><br>
<img src="images/seealso.gif" border="0" align="absmiddle"> See Also: <a href="config.html">Configuration Overview</a>
</p>

<p>
<strong><u>Introduction</u></strong>
</p>

<p>
This guide is intended to provide you with simple instructions on how to install Nagios from source (code) and have it monitoring your local machine inside of 15 minutes.  No advanced installation options are discussed here - just the basics that will work for 95% of users who want to get started.
</p>

<p>
<img src="images/note.gif" border="0" align="bottom"> Note: These instructions were written based on a standard Fedora Core 6 Linux distribution.  Naming conventions, commands, etc. vary across different Linux distros and UNIX variants, so the instructions provided here may have to be altered a bit for your situation.  If you're having trouble using these instructions, you can find OS/distribution-specific installation guides, HOWTOs, and other helpful installation documentation on the <a href="http://www.nagioscommunity.org/wiki/">NagiosCommunity.org wiki</a>.
</p>

<p>
<strong><u>What You'll End Up With</u></strong>
</p>

<p>
If you follow these instructions, here's what you'll end up with:
</p>

<p>
<ul>
<li>Nagios and the plugins will be installed underneath /usr/local/nagios</li>
<li>Nagios will be configured to monitor a few aspects of your local system (CPU load, disk usage, etc.)</li>
<li>The Nagios web interface will be accessible at http://localhost/nagios/</li>
</ul>
</p>

<p>
<strong><u>Prerequisites</u></strong>
</p>

<p>
During portions of the installation you'll need to have <b>root</b> access to your machine.  You'll also need the following items installed before you can proceed:
</p>

<p>
<ul>
<li>C compiler and C libraries (gcc and glibc)</li>
<li>Web server (Apache)</li>
<li>GD library (gd-devel)</li>
</ul>
</p>

<p>
You can still install and use Nagios without the GD library if you need to, as it is only used by a few of the CGIs for generating graphics. Let's get started!
</p>

<p>
<strong><u>1) Download Nagios and the Plugins</u></strong>
</p>

<p>
Create a directory for storing the downloads.
</p>

<p>
<pre>
mkdir ~/downloads
cd ~/downloads
</pre>
</p>

<p>
Download the source code tarballs of both Nagios and the Nagios plugins (visit <a href="http://www.nagios.org/download/">http://www.nagios.org/download/</a> for links to the latest versions).
</p>

<p>
<pre>
wget http://osdn.dl.sourceforge.net/sourceforge/nagios/nagios-3.0a1.tar.gz
wget http://osdn.dl.sourceforge.net/sourceforge/nagiosplug/nagios-plugins-1.4.6.tar.gz
</pre>
</p>

<p>
<strong><u>2) Create Account Information</u></strong>
</p>

<p>
Login as root using <i>su</i> or <i>sudo -s</i>.
</p>

<p>
<pre>
su
</pre>
</p>

<p>
Create a new <i>nagios</i> user account and give it a password.
</p>

<p>
<pre>
/usr/sbin/useradd nagios
/usr/bin/passwd nagios
</pre>
</p>

<p>
Create a new <i>nagcmd</i> group for allowing external commands to be submitted through the web interface. Add both the nagios user and the apache user to the group.
</p>

<p>
<pre>
/usr/sbin/groupadd nagcmd
/usr/sbin/usermod -G nagcmd nagios
/usr/sbin/usermod -G nagcmd apache
</pre>
</p>

<p>
<strong><u>3) Compile and Install Nagios</u></strong>
</p>

<p>
Extract the Nagios source code tarball.
</p>

<p>
<pre>
cd ~/downloads
tar xzf nagios-3.0a1.tar.gz
cd nagios-3.0a1
</pre>
</p>

<p>
Run the Nagios configure script, passing the name of the group you created earlier like so:
</p>

<p>
<pre>
./configure --with-command-group=nagcmd
</pre>
</p>

<p>
Compile the Nagios source code.
</p>

<p>
<pre>
make all
</pre>
</p>

<p>
Install binaries, init script, sample config files and set permissions on the external command directory.
</p>

<p>
<pre>
make install
make install-init
make install-config
make install-commandmode
</pre>
</p>

<p>
Add Nagios to the list of system services and have it automatically start when the system boots.
</p>

<p>
<pre>
chkconfig --add nagios
chconfig nagios on
</pre>
</p>

<p>
Don't start Nagios yet - there's still more that needs to be done...
</p>

<p>
<strong><u>4) Configure the Web Interface</u></strong>
</p>

<p>
Copy the sample web config file to the Apache conf.d directory.
</p>

<p>
<pre>
cp sample-config/httpd.conf /etc/httpd/conf.d/nagios.conf
</pre>
</p>

<p>
Create a <i>nagiosadmin</i> account for logging into the Nagios web interface.  Remember the password you assign to this account - you'll need it later.
</p>

<p>
<pre>
htpasswd -c /usr/local/nagios/etc/htpasswd.users nagiosadmin
</pre>
</p>

<p>
Restart Apache to make the new settings take effect.
</p>

<p>
<pre>
service httpd restart
</pre>
</p>



<p>
<strong><u>5) Compile and Install the Nagios Plugins</u></strong>
</p>

<p>
Extract the Nagios plugins source code tarball.
</p>

<p>
<pre>
cd ~/downloads
tar xzf nagios-plugins-1.4.6.tar.gz
cd nagios-plugins-1.4.6
</pre>
</p>

<p>
Compile and install the plugins.
</p>

<p>
<pre>
./configure
make
make install
</pre>
</p>

<p>
<strong><u>6) Start Nagios</u></strong>
</p>

<p>
Verify the sample Nagios configuration files.
</p>

<p>
<pre>
/usr/local/nagios/bin/nagios -v /usr/local/nagios/etc/nagios.cfg
</pre>
</p>

<p>
If there are no errors, start Nagios.
</p>

<p>
<pre>
service nagios start
</pre>
</p>

<p>
<strong><u>6) Login to the Web Interface</u></strong>
</p>

<p>
You should now be able to access the Nagios web interface at the URL below.  You'll be prompted for the username (<i>nagiosadmin</i>) and password you specified earlier.
</p>

<p>
<pre>
http://localhost/nagios/
</pre>
</p>

<p>
Click on the "Service Detail" navbar link to see details of what's being monitored on your local machine.
</p>

<p>
<img src="images/note.gif" border="0" align="bottom"> Note: If you get an "" error while attempting to view the CGIs, its likely due to the fact that SELinux is installed on your system
</p>

<p>
<strong><u>7) You're Done</u></strong>
</p>

<p>
Congratulations!  You sucessfully installed Nagios.
</p>

<p>
Your journey into monitoring is just beginning.  You'll no doubt want to monitor more than just your local machine, so start reading the sections of the documentation under "Configuring Nagios" and "The Basics" in the <a href="toc.html">table of contents</a>.
</p>

<hr>

</body>
</html>