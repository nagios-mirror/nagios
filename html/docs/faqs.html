<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.0 Transitional//EN">

<html>
<head>
<title>Nagios FAQs</title>

<STYLE type="text/css">
<!--
        .PageTitle { font-family: arial,serif; font-size: large; }
        .Default { font-family: arial,serif; font-size: small; }
-->      
</STYLE>

</head>

<body bgcolor="#FFFFFF" text="black" class="Default">

<p>
<div align="center">
<h2 class="PageTitle">Frequently Asked Questions (FAQs)</h2>
</div>
</p>
<hr>

<p>
<strong><u>Index</u></strong>
</p>
<p>
<ul>
<li><a href="#compile_problems">Problems compiling Nagios</a><br>
<li><a href="#gd_library_problems">The statusmap, trends, and histogram CGIs don't work!</a><br>
<il><a href="#statusmap_coordinates">No hosts are displayed in the image or VRML world generated by the statusmap or statuswrl CGIs</a><br>
<li><a href="#missing_plugins">The installation didn't create a <i>libexec/</i> directory.  Where are all the plugins?</a>
<li><a href="#unreachable_notifications">Why do I get notifications when hosts are UNREACHABLE?</a>
<li><a href="#bad_host_check_command">Hosts are incorrectly listed as being DOWN or UNREACHABLE</a><br>
<li><a href="#incorrect_notification_commands">When hosts go down, I get notification about services instead of hosts and the service notifications contain incorrect data</a><br>
<li><a href="#host_no_service">Can I monitor a host without defining any services for it?</a><br>
<li><a href="#adding_config_objects">Can I add host or service definitions without restarting Nagios?</a><br>
<li><a href="#timeouts">How can I change the timeout values for service checks?</a><br>
<li><a href="#return_code_bounds">"Return code of <i>x</i> is out of bounds" errors</a><br>
<li><a href="#mail_command_problems">I get error messages when email notifications should get sent out</a><br>
<br>
<li><a href="#unknown_variable">Debugging "unknown variable" errors during configuration verification or runtime</a><br>
<li><a href="#multiple_instances">Running multiple instances of Nagios on the same machine</a><br>
<li><a href="#improper_authorization">Missing data in the CGIs or errors about improper authorization</a><br>
<li><a href="#traceroute_cgi">Where can I find the traceroute and daemonchk CGIs?</a><br>
<li><a href="#web_authentication">Requiring users to authenticate before accessing web interface</a><br>
<li><a href="#pretty_icons">Displaying pretty host icons</a><br>
<li><a href="#command_file_permissions">Errors commiting commands via the command CGI</a><br>
<li><a href="#command_file_shutdown">Nagios shuts down with warnings about permissions on the command file</a><br>
<li><a href="#remote_host_monitoring">Monitoring remote host information</a><br>
<li><a href="#nt_servers">Monitoring Windows NT servers</a><br>
<li><a href="#novell_servers">Monitoring Novell servers</a><br>
<li><a href="#sending_snmp_traps">Sending SNMP traps to management hosts</a><br>
<li><a href="#receiving_snmp_traps">Receiving SNMP traps</a><br>
<li><a href="#logging_to_database">Logging events to an external database</a><br>
<li><a href="#troubleshooting">Troubleshooting problems with Nagios</a><br>
</ul>
</p>

<p>
<div align="center">
<table border="0" width="100%">

<tr bgcolor="#d2d2d2">
<td><a name="compile_problems"></a><strong>I'm having trouble compiling Nagios - What can I do?</strong></td>
</tr>

<tr><td><br></td></tr>

<tr>
<td>
<p>
Compiling Nagios on different OSes doesn't really seem to be much of a problem anymore, unless you're missing some string functions...
</p>
<p>
If you're getting errors about the <b>strncat()</b>, <b>strncpy()</b>, or <b>snprintf()</b> functions, you probably don't have the glibc libraries installed on your system.  This tends to happen most often on HP-UX and Solaris boxes.  I've tried to prevent potential buffer overflows in Nagios and the CGIs by using these functions, so they are all over the code.  If you don't want to install the glibc libraries for some reason, you'll have to find some other way to get everything compiled.
</p>
<p>
 If all you're missing is the snprintf() function, you might want to try grabbing the snprintf.c file from <a href="http://www.ijs.si/software/snprintf/">http://www.ijs.si/software/snprintf/</a> and adding it to the Makefiles so that it gets included during when you compile things.  A few people have mentioned that this version of snprintf does not support the '%f' formatting flag, so you may be out of luck.  Sorry.
</p>
</td>
</tr>

<tr><td><br></td></tr>

<tr bgcolor="#d2d2d2">
<td><a name="gd_library_problems"></a><strong>The statusmap, trends, and histogram CGIs don't work!</strong></td>
</tr>

<tr><td><br></td></tr>

<tr>
<td>
<p>
If you compile all the CGIs, but don't find the <a href="cgis.html#statusmap_cgi">statusmap CGI</a>, <a href="cgis.html#trends_cgi">trends CGI</a> or <a href="cgis.html#histogram_cgi">histogram CGI</a> (or can't get them to work), you probably don't have the following libraries installed correctly on your system:
</p>
<p>
<ul>
<li>Thomas Boutell's <a href="http://www.boutell.com/gd">gd library</a> (version 1.6.3 or higher is required)
<li><a href="http://www.gzip.org/zlib/">Zlib (de)compression library</a>
<li><a href="http://www.libpng.org/pub/png/">PNG development library</a>
</ul>
</p>
<p>
The <b>gd</b> library is dependent upon the <b>zlib</b> and <b>png</b> libraries (along with a few others), so you'll have to have those libraries installed on your system before you can install the <b>gd</b> library.  Newer versions of the <b>gd</b> library also require that the <b>jpeg</b> library also be installed on your system.
</p>
<p>
If you find that the CGIs has not been compiled or do not work properly, make sure you have the <b>gd</b>, <b>png</b>, <b>zlib</b>, and any other required libraries installed on your system.  Then clean out your old Nagios configuration information and rerun the configure script with the following two commands (from within you Nagios distribution directory):
</p>
<p>
<pre>
<font color="red">
make devclean
./configure --with-gd-lib=LIBDIR --with-gd-inc=INCDIR [other options...]
</font>
</pre>
</p>
<p>
Replace LIBDIR with the directory in which the gd library is installed (usually /usr/lib or /usr/local/lib) and replace INCDIR with the directory in which the header files for the gd library are installed (usually /usr/include or /usr/local/include).
</p>
<p>
After you rerun the configure script, make sure to recompile the CGIs and install them in their proper location.
</p>
<p>
If you're running RedHat Linux and are having a lot of trouble getting things working, I would recommend downloading and installing both the <i>gd</i> and <i>gd-devel</i> RPMs from <a href="http://www.rpmfind.net">www.rpmfind.net</a>.  Note that other applications that depend on the gd library (PHP, MRTG, etc.) may break when you upgrade, so they may need to be upgraded or rebuilt as well.
</p>
</td>
</tr>
<tr><td><br></td></tr>

<tr bgcolor="#d2d2d2">
<td><a name="statusmap_coordinates"></a><strong>No hosts are displayed in the image or VRML world generated by the statusmap or statuswrl CGIs</strong></td>
</tr>

<tr><td><br></td></tr>

<tr>
<td>
<p>
The most likely cause of this problem is the fact that you haven't supplied any 2-D or 3-D drawing coordinates for the hosts.  Although the statusmap CGI can generate and auto-layout of your hosts, it defaults to trying to use user-supplied coordinates.  The statuswrl CGI (VRML) will not function if you do not specify 3-D drawing coordinates.
</p>

<p>
How do you specify drawing coordinates for hosts?  By using <a href="configextinfo.html">extended information definitions</a>.
</p>
</td>
</tr>

<tr><td><br></td></tr>

<tr bgcolor="#d2d2d2">
<td><a name="missing_plugins"></a><strong>The installation didn't create a <i>libexec/</i> directory.  Where are all the plugins?</strong></td>
</tr>

<tr><td><br></td></tr>

<tr>
<td>
<p>
If you didn't read the <a href="installing.html">installation documentation</a> carefully and didn't notice the big note on the downloads page, you're most likely going to be wondering where all the <a href="plugins.html">plugins</a> are.  Quick and easy answer - they are distributed separately from Nagios, so you'll have to grab them from the <a href="http://www.nagios.org/download/">downloads page</a> or directly from the <a href="http://sourceforge.net/projects/nagiosplug/">SourceForge project page</a>.
</p>

</td>
</tr>

<tr><td><br></td></tr>

<tr bgcolor="#d2d2d2">
<td><a name="unreachable_notifications"><strong>Why do I get notifications when hosts are UNREACHABLE?</strong></a><br>
</td>
</tr>

<tr><td><br></td></tr>

<tr>
<td>

<p>
Easy answer.  You enabled the <i>notify_unreachable</i> option in the host definition(s).  If you don't want to get notified when a host becomes unreachable, disable this option in the host definition.
</p>

<p>
I get lots of emails asking why Nagios isn't smart enough to disable notifications for hosts that unreachable.  The fact of the matter is that Nagios <i>is</i> smart enough to distinguish between DOWN and UNREACHABLE states - you just have to configure your notification options properly.
</p>

</td>
</tr>

<tr><td><br></td></tr>

<tr bgcolor="#d2d2d2">
<td><a name="bad_host_check_command"><strong>Hosts are incorrectly listed as being DOWN or UNREACHABLE</strong></a><br>
</td>
</tr>

<tr><td><br></td></tr>

<tr>
<td>

<p>
This seems to be one of the biggest issues for new users.  99.9% of the time this problem is due to an incorrect command definition for the host check command you specified in the host definition.
</p>

<p>
A major cause for this problem was due to a syntax change to the command line arguments of the check_ping plugin.  You need to make sure that the host check command is using the proper syntax for the version of the check_ping plugin that you have.  You can check to see if the command works properly by executing it manually from the command line.  Recent versions of the check_ping plugin require that a <b>-p</b> flag be used to specify the number of packets to send.  Previous versions of the plugin did not require this flag - that's where the problem lies.  Check your version of the plugin to find out what syntax you should be using and the check your host check command definition(s) to make sure they are using the proper syntax.
</p>

<p>
<strong>Important!</strong>  Just because you have a service that is monitoring ping statistics for a host does <i>not</i> mean that the actual host status is being checked.  The status of a host is only checked when a service check results in a non-OK state or if the host was previously down and a service check results in an OK state.
</p>

<p>
Some symptoms of incorrect host check commands include:
</p>
<p>
<ol>
<li>Hosts incorrectly being listed as DOWN
<li>Hosts incorrectly being listed as UNREACHABLE
<li>Alternating alerts/notifications about host problems and recoveries
</ol>
</p>

</td>
</tr>

<tr><td><br></td></tr>

<tr bgcolor="#d2d2d2">
<td><a name="incorrect_notification_commands"><strong>When hosts go down, I get notification about services instead of hosts and the service notifications contain incorrect data</strong></a><br>
</td>
</tr>

<tr><td><br></td></tr>

<tr>
<td>

<p>
Several people have reported this problem and I spent hours trying to find the problem until I realized it wasn't a bug in the code.  If you get service notifications when you should be getting host notifications (and the service notifications you get seem to contain bogus data), check your contact definitions in the <a href="configobject.html">object config file(s)</a>.  They are most likely incorrect.
</p>

<p>
Make sure that you are not using the same notification command for service and host notification commands.  Service and host notifications are very different and make use of <a href="macros.html">macros</a> which are not transferrable between each type.  Look at the sample host config file provided with Nagios to see what the contact definitions look like and how the service and host notification commands differ.  If you're wondering what macros can be used in either type of notification, look at <a href="macros.html">this table</a>.
</p>


</td>
</tr>

<tr><td><br></td></tr>

<tr bgcolor="#d2d2d2">
<td><a name="host_no_service"><strong>Can I monitor a host without defining any services for it?</strong></a><br>
</td>
</tr>

<tr><td><br></td></tr>

<tr>
<td>

<p>
No, not really.  Although you <i>can</i> define a host and not assign any services to it, you will <i>not</i> get the results you are expecting.  You must define at least one service for each host you want to monitor.  Nagios is primarily geared towards monitoring services - hosts are really only checked when there are problems or recoveries with services (as noted in the <a href="checkscheduling.html#host_checks">service check scheduling</a> documentation).
</p>

</td>
</tr>


<tr><td><br></td></tr>

<tr bgcolor="#d2d2d2">
<td><a name="adding_config_objects"><strong>Can I add host or service definitions without restarting Nagios?</strong></a><br>
</td>
</tr>

<tr><td><br></td></tr>

<tr>
<td>

<p>
No.  You must restart Nagios every time you add hosts or services (or any other type of object definition found in the <a href="configobject.html">object config file(s)</a>).
</p>

<p>
<b>Important:</b>  If you make configuration changes without restarting Nagios, you may notice irregularities in the CGIs.  Some new hosts may appear, some services may disappear, etc.  This does <i>not</i> mean that Nagios has stopped monitoring the original services and hosts that it started with.  This is simply a side effect of the <a href="cgiauth.html">authorization logic</a> in the CGIs.
</p>

</td>
</tr>


<tr><td><br></td></tr>

<tr bgcolor="#d2d2d2">
<td><a name="timeouts"><strong>How can I change the timeout values for service checks?</strong></a><br>
</td>
</tr>

<tr><td><br></td></tr>

<tr>
<td>

<p>
First you need to identify where the timeout is occurring.  Most plugins time out after 10 seconds of not being able to contact a service (FTP, HTTP, etc).  If the plugins are timing out after a short period of time, increase the timeout value for the plugin (use an appropriate command line argument).
</p>

<p>
In addition to plugins having timeouts, Nagios enforces its own timeout value on all service checks that run.  By default, this is set to 30 seconds.  If the plugin executes for more than 30 seconds, Nagios will automatically kill it off and return a critical error for that service.  If you see entries in the log file that say a service check timed out, this may be your problem.  You can adjust the maximum timeout value for service checks by using the <a href="configmain.html#service_check_timeout">service_check_timeout</a> directive.
</p>

<p>
As a side note, there are also directives for setting the maximum timeout for <a href="configmain.html#host_check_timeout">host checks</a>, <a href="configmain.html#notification_timeout">notifications</a>, <a href="configmain.html#event_handler_timeout">event handlers</a>, and the <a href="configmain.html#ocsp_timeout">ocsp command</a>.
</p>

</td>
</tr>


<tr><td><br></td></tr>

<tr bgcolor="#d2d2d2">
<td><a name="return_code_bounds"><strong>"Return code of <i>x</i> is out of bounds" errors</strong></a><br>
</td>
</tr>

<tr><td><br></td></tr>

<tr>
<td>

<p>
If the plugin output for a host or service check give a "(Return code of <i>x</i> is out of bounds)" error it usually means one of two things:
</p>

<p>
<ol>
<li>The plugin you're using to perform the host or service check is not returning the proper return code when it exits <br><br>
<li>The path to the plugin is invalid (i.e. the binary or script does not exist).  This is most likely the case if you get errors about a return code of <b>127</b> being out of bounds.  If this is the error you're getting, check your command definitions and make sure the path to all executables is correct (and that they're actually installed on your system).
</ol>
</p>

<tr><td><br></td></tr>

<tr bgcolor="#d2d2d2">
<td><a name="mail_command_problems"><strong>I get error messages when email notifications should get sent out</strong></a><br>
</td>
</tr>

<tr><td><br></td></tr>

<tr>
<td>

<p>
If you're seeing message like "<i>mail: Null names are not allowed</i>", "<i>You must specify direct recipients with -s, -c, or -b.</i>", or something similiar, you've probably got an error in your notification command definitions.
</p>

<p>
Make sure that the syntax used to call <b>/bin/mail</b> (or whatever/wherever your mail program happens to be) in your notification command definitions is correct for your system.
</p>

</td>
</tr>

<tr><td><br></td></tr>

<tr bgcolor="#d2d2d2">
<td><a name="verify_config"></a><strong>Debugging "unknown variable" errors during configuration file verification or runtime</strong></td>
</tr>

<tr><td><br></td></tr>

<tr>
<td>
<p>
When trying to run Nagios or verify your configuration file data using the <b>-v</b> argument, 
Nagios may print out a message like "Error in configuration file 'xxxxxxx.cfg' - Line 34 (Unknown variable)".
A few simple checks will usually resolve this problem...
</p>
<p>
<ol>
<li>Make sure you are passing the path to the <a href="configmain.html">main configuration file</a> on the command line. The correct syntax would be as follows (modified for your system, of course):<br><b>/usr/local/nagios/bin/nagios -v /usr/local/nagios/etc/nagios.cfg</b>
<br><br>
<li>Make sure that you don't have any invalid variables defined in your configuration file.  Notice that the error message will contain a reference to the name of the configuration file and the line number on which the error was encountered.  Make sure that all comment lines contain a pound sign (#) in the first character of the line.  If you're not sure about what variables are valid, check the documentation for the <a href="configmain.html">main</a> and <a href="configobject.html">object</a> configuration files.
<br><br>
<li>Make sure all variable identifiers are in lower case.  Example:<br><b>"admin_email=someaddress@somedomain.com"</b> instead of <b>"ADMIN_EMAIL=somedomain@nowhere.com"</b>
</ol>
</p>
</td>
</tr>

<tr><td><br></td></tr>

<tr bgcolor="#d2d2d2">
<td><a name="multiple_instances"></a><strong>How do I run multiple instances on Nagios on the same machine?</strong></td>
</tr>

<tr><td><br></td></tr>

<tr>
<td>
<p>
You can run multiple instances of Nagios on the same machine, if you ensure that the following variables are unique for each instance of Nagios...
</p>
<p>
<ul>
<li><a href="configmain.html">Main configuration file</a>
<li><a href="configmain.html#temp_file">Temp file</a>
<li><a href="configmain.html#status_file">Status file</a>
<li><a href="configmain.html#command_file">External command file</a>
<li><a href="configmain.html#log_file">Log file</a>
<li><a href="configmain.html#log_archive_path">Log archive path</a>
<li><a href="configmain.html#lock_file">Lock file</a>
</ul>
</p>
<p>
If you are using the web interface, you will have to setup separate directories to hold the CGIs for each instance of Nagios and create appropriate script aliases in your web server configuration file.  This is necessary because <a href="configcgi.html">CGI configuration file</a> must be unique for each setup of CGIs, as it contains a reference to which main configuration file the CGIs should read.
</p>
<p>
One last thing you should check is your init script (if you're using one).  The init script should start, stop, restart, and reload all copies of Nagios (if that's what you want it to do).
</p>
</td>
</tr>

<tr><td><br></td></tr>

<tr bgcolor="#d2d2d2">
<td><a name="improper_authorization"></a><strong>When I access the CGIs I don't see everything I should or I get authorzation errors...</strong></td>
</tr>

<tr><td><br></td></tr>

<tr>
<td>

<p>
If you believe you are unable to see all the information in the CGIs or if you are getting authorization errors, you probably haven't configured the web server to require authentication or haven't setup authorzation correctly.  See the documentation on authentication and authorization in the CGIs <a href="cgiauth.html">here</a>.
</p>

</td>
</tr>

<tr><td><br></td></tr>

<tr bgcolor="#d2d2d2">
<td><a name="traceroute_cgi"></a><strong>Where can I find the traceroute and daemonchk CGIs?</strong></td>
</tr>

<tr><td><br></td></tr>

<tr>
<td>

<p>
The <i>traceroute</i> and <i>daemonchk</i> CGIs are now included in the contrib/ subdirectory of the main Nagios distribution.
</p>

</td>
</tr>

<tr><td><br></td></tr>

<tr bgcolor="#d2d2d2">
<td><a name="web_authentication"></a><strong>How do I requre users to authenticate before accessing the web interface?</strong></td>
</tr>

<tr><td><br></td></tr>

<tr>
<td>

<p>
See the documentation on authentication and authorization in the CGIs <a href="cgiauth.html">here</a>.
</p>

</td>
</tr>

<tr><td><br></td></tr>

<tr bgcolor="#d2d2d2">
<td><a name="pretty_icons"></a><strong>How do I get those pretty pretty host icons to display in my CGIs?</strong></td>
</tr>

<tr><td><br></td></tr>

<tr>
<td>

<p>
If you want to associate images with particular hosts for use in the status, status map, status world, and extended information CGIs, you must define <a href="configextinfo.html">extended host information</a> entries.
</p>

</td>
</tr>

<tr><td><br></td></tr>

<tr bgcolor="#d2d2d2">
<td><a name="command_file_permissions"></a><strong>I'm getting errors when attempting to commit commands to Nagios via the command CGI</strong></td>
</tr>

<tr><td><br></td></tr>

<tr>
<td>

<p>
If you are getting '<b>Could not open command file <i>somefile</i> for update</b>' errors when attempting to commit commands to Nagios via the <a href="cgis.html#cmd_cgi">command CGI</a>, the most likely problem is with directory and/or file permissions.  Here is what you can do to fix it...
</p>

<p>
<ol>

<li>Make sure you've created the directory to hold the command file as outlined <a href="commandfile.html">here</a>.<br><br>

<li>Make sure you restart your web server so that it inherits the new group permissions you just assigned

</ol>
</p>


</td>
</tr>


<tr><td><br></td></tr>

<tr bgcolor="#d2d2d2">
<td><a name="command_file_shutdown"></a><strong>Nagios shuts down with warnings about permissions on the command file</strong></td>
</tr>

<tr><td><br></td></tr>

<tr>
<td>

<p>
If Nagios is shutting itself down after it processes external commands and you get warnings in the log file about incorrect permissions on the command file, make sure to read the directions found <a href="commandfile.html">here</a>.
</p>

</td>
</tr>

<tr><td><br></td></tr>

<tr bgcolor="#d2d2d2">
<td><a name="remote_host_monitoring"></a><strong>How do I monitor remote host information?</strong></td>
</tr>

<tr><td><br></td></tr>

<tr>
<td>
<p>
Several people have asked how to use various <a href="plugins.html">plugins</a> that check information on the local host to report information from remote hosts.  Various methods for doing this are described below..
</p>
<p>
If you need to actually execute a plugin on a remote host and get the results back, you can use one of the following methods...
</p>
<p>
<ul>
<li>Use the <a href="plugins.html#check_by_ssh">check_by_ssh</a> "plugin" to execute a plugin on a remote host.  The <b>check_by_ssh</b> plugin is basically a wrapper for executing a plugin on a remote host using SSH.  You must have SSH installed and configured properly in order to use this.
<li>Use the <a href="addons.html#nrpe">nrpe</a> addon to accomplish this.  The plugins and the nrpe daemon reside on the remote host.  The check_nrpe plugin (included with the nrpe package) sends a request to the nrpe daemon to execute the plugin on the remote host and then grabs the results for Nagios.
<li>Use the <a href="addons.html#nrpep">nrpep</a> addon.  This addon works in a similiar manner to the nrpe package, but it encrypts the transmitted data, runs as a service from inetd, and makes use of the TCP Wrappers package for access control.
<li>Use <b>rsh</b> to execute the plugin remotely, although I guess I wouldn't recommend this..
</ul>
</p>

<p>
If all you need is to check disk space, etc. on a remote host, you can use one of the methods below...
</p>
<p>
<ul>
<li>Use one of the plugins included with the <a href="addons.html#nagios_statd">nagios_statd</a> addon for
Nagios.  The addon, written by Charlie Cook, includes a Perl daemon which runs on the remote host and four plugins which are used to gather the remote host information from the daemon.  The daemon is designed to run on Linux, IRIX, HP-UX, SunOS, and OSF/1 systems.  Modifying the code for other systems should be fairly easy.  More on the <b>nagios_statd</b> plugin can be found <a href="addons.html#nagios_statd">here</a>.  <li>Use the <a href="plugins.html#check_overcr">check_overcr</a> plugin to query information from a remote host.  The remote host must be running Eric Molitor's <a href="http://www.molitor.org/overcr/">Over-CR</a> collector in order for this to work.
<li>Use the <a href="plugins.html#check_snmp">check_snmp</a> plugin to check the value of various OIDs on the remote host.  You must have SNMP services installed and running on the remote host in order to do this.
</ul>
</p>
</td>
</tr>

<tr><td><br></td></tr>

<tr bgcolor="#d2d2d2">
<td><a name="nt_servers"></a><strong>How can I monitor Windows NT servers?</strong></td>
</tr>

<tr><td><br></td></tr>

<tr>
<td>
<p>
Yes, you can monitor NT servers with Nagios.  There are basically two ways it can currently be done...
</p>
<p>
<ul>
<li>By using SNMP
<li>By using the NSSERVICER addon (service and plugins)
</ul>
</p>

<p>
<strong><u>SNMP</u></strong>
</p>

<p>
The good news is that NT has a lot of performance data that you can monitor.  The bad news is that its difficult to do.  Your best bet is probably going to be to install SNMP services on all your NT boxes.
</p>
<p>
In order to expose NT performance counters for monitoring, you'll have to run the SNMP service on all servers you want to monitor.  You'll also have to install any necessary performance MIBs for the services you want to monitor.  I believe these can be found in the NT Resource Kit or in various server admin packages.  If you've feeling extra lucky you can try to search the Microsoft site for the terms <b>SNMP</b> and <b>MIB</b> and maybe you'll find something...
</p>
<p>
You can search the <a href="http://www.ee.ethz.ch/~slist/mrtg">MRTG mailing list archives</a> for more information on configuring NT servers to expose various performance counters via SNMP.  I know this has been discussed in the past, as many people are graphing various NT performance statistics using MRTG.  In fact, somebody from Microsoft is actually doing it - you can find their web page at <a href="http://snmpboy.msft.net/">http://snmpboy.msft.net/</a>.
</p>
<p>
Once you've actually got the SNMP stuff working, you can use the <a href="plugins.html#check_snmp">check_snmp</a> plugin to query your NT servers and generate alarms.
</p>

<p>
<strong><u>NSSERVICER Addon</u></strong>
</p>

<p>
Jan Christian Kaldestad and Hallstein Lohne have written the nsservicer addon for monitoring NT servers.  The addon includes a service that runs on your NT servers and several plugins that run from the Nagios host.  The nsservicer addon is capable of monitoring the event log, disk usage, process usage, and other info.  
</p>

<p>
You can find the addon int the contrib section of the <a href="http://www.nagios.org/download">downloads page</a>.
</p>

</td>
</tr>

<tr><td><br></td></tr>

<tr bgcolor="#d2d2d2">
<td><a name="novell_servers"></a><strong>How can I monitor Novell Netware servers?</strong></td>
</tr>

<tr><td><br></td></tr>

<tr>
<td>

<p>
You can monitor basic stats on your Novell server like disk usage, user connections, LRU sitting time, cache buffers, long term cache hits, and processor load by using the <i>check_nwstat</i> plugin (which is included in the main plugin distribution).  In order for the plugin to work, you have to install and run James Drew's MRTGEXT NLM on your Novell server.  The NLM can be obtained <a href="http://www.cae.wisc.edu/~drews/mrtg/">here</a>.
</p>

</td>
</tr>

<tr><td><br></td></tr>

<tr bgcolor="#d2d2d2">
<td><a name="sending_snmp_traps"></a><strong>Can Nagios send SNMP traps to management hosts?</strong></td>
</tr>

<tr><td><br></td></tr>

<tr>
<td>
<p>
Yes, but not directly.  Nagios relies on plugins to handle the gathering of service and host information and event handler scripts to handle events that occur with services and hosts.  If you want to have Nagios send an SNMP trap to a management host in the event that a particular service has a problem, you will have to write a service <a href="eventhandlers.html">event handler</a> script and add it to the <b>event_handler</b> option of the service definition.  If you have the <a href="http://net-snmp.sourceforge.net">UCD-SNMP</a> package installed on your host, you could have the script call the <b>snmptrap</b> command to actually send a trap message, depending on what type of service event occurred.  Look at the <a href="eventhandlers.html#example">example event handler script</a> to get a better idea of how to write a script.
</p>
</td>
</tr>

<tr><td><br></td></tr>

<tr bgcolor="#d2d2d2">
<td><a name="receiving_snmp_traps"></a><strong>Can Nagios receive SNMP traps?</strong></td>
</tr>

<tr><td><br></td></tr>

<tr>
<td>
<p>
Yes, but not directly.  Nagios is not designed to be a replacement for a full-blown SNMP management system, but you can configure it to generate alerts based on SNMP traps that are received by some host on your network.  If you have the <a href="http://net-snmp.sourceforge.net">UCD-SNMP</a> (now called NET-SNMP) package installed on a host on your network, you can have the <i>snmptrapd</i> daemon route SNMP traps to Nagios using passive checks.  More information on doing this can be found <a href="othersw/snmptrap.html">here</a>.
</p>
</td>
</tr>

<tr><td><br></td></tr>

<tr bgcolor="#d2d2d2">
<td><a name="logging_to_database"></a><strong>Can Nagios log host and service events to an external database?</strong></td>
</tr>

<tr><td><br></td></tr>

<tr>
<td>
<p>
Not directly, but this can be done fairly easily.  You'll probably want to define global host and service <a href="eventhandlers.html">event handlers</a> to do this.  The global event handlers could call a script which inserts the appropriate event information into a database of your choosing.  This would allow you to run queries and generate more detailed reports than what are available in the CGIs.
</p>
</td>
</tr>

<tr><td><br></td></tr>

<tr bgcolor="#d2d2d2">
<td><a name="troubleshooting"></a><strong>Something isn't working properly - How can I track down the problem?</strong></td>
</tr>

<tr><td><br></td></tr>

<tr>
<td>
<p>
I've worked in tech support for a few years and have spent my share of time on a helpdesk.  Most people are vague when they report a problem and have no desire whatsoever to try and track down the problem - they just want you to fix it <b>now</b>.  I hope you are not that type of person.  Nagios is relatively new and is probably chock full of bugs, so things will not always work properly.  If you suspect that either the service check or notification routines are not working, here are a few things you can do to try and track down the problem...
</p>
<p>
This first thing you should do is <a href="verifyconfig.html">verify your configuration</a> data
by running Nagios with the <b>-v</b> option.  Example:
</p>
<p>
<font color="red">
/usr/local/nagios/bin/nagios -v /usr/local/nagios/etc/nagios.cfg
</font>
</p>
<p>
If no errors are found, proceed to the next steps.  If Nagios reports some error, go back and fix your configuration files.
</p>
<p>
The next step will take more time, but will give you more information on what is going on inside of Nagios.  When I first developed Nagios I added a lot of debugging code to help me track down problems.  I still use that code when I add new features or track down bugs myself.  Here is how to use the debugging code...
</p>
<p>
Reconfigure Nagios and enable one or more debug options as follows, replacing the "--enable-DEBUGx" with one or more of the values from the table below:
</p>
<p>
<font color="red">
./configure --prefix=/your/nagios/directory --enable-DEBUGx
</font>
</p>

<p>
<strong><u>Debugging Options</u></strong>
</p>

<p>
<div align="center">
<table border="1">
<tr bgcolor="#cbcbcb">
<td><strong>Debug Option</strong></td>
<td><strong>Description</strong></td>
</tr>
<tr>
<td valign="top"><strong>--enable-DEBUG0</strong></td>
<td>
Used to trace function calls.  A <b>lot</b> of messages will be printed out if you uncomment this option, but it very useful to trace what functions are being called.  Note that not all functions will print an exit message if code within the function causes an early exit (before reaching the end of the function).
</td>
</tr>
<tr>
<td valign="top"><strong>--enable-DEBUG1</strong></td>
<td>
Used to print out informational messages about variable settings.  Most useful when trying to debug the configuration data as it is being read or verified.
</td>
</tr>
<tr>
<td valign="top"><strong>--enable-DEBUG2</strong></td>
<td>
Used to print out warning messages, usually when configuration data is being read or verified.
</td>
</tr>
<tr>
<td valign="top"><strong>--enable-DEBUG3</strong></td>
<td>
Used to print out informational messages during host and service checks.  Good to use if you suspect problems are occuring during service checks.
</td>
</tr>
<tr>
<td valign="top"><strong>--enable-DEBUG4</strong></td>
<td>
Used to print out informational messages during host and service notifications.  Good to use if you suspect problems are occurring during the notification events.
</td>
</tr>
<tr>
<td valign="top"><strong>--enable-DEBUG5</strong></td>
<td>
Used to print out SQL queries if you've compiled Nagios with database support.
</td>
</tr>
</table>
</div>
</p>
<p>
Recompile Nagios.
</p>
<p>
<a href="verifyconfig.html">Verify your configuration data</a> again - you'll see a lot more information this time
if you have enabled the <b>DEBUG1</b> option.  Try redirecting output to a file so that you can view or print it at a later time.
</p>
<p>
If you have defined either the <b>DEBUG3</b> or <b>DEBUG4</b> options, run Nagios as a foreground process and start monitoring your services.  Example:
</p>
<p>
<font color="red">
/usr/local/nagios/bin/nagios /usr/local/nagios/etc/nagios.cfg
</font>
</p>
<p>
Kill Nagios at an approprate point (i.e. after a service check fails) and look through the output.  It should
help you track down where the problem is occurring.  You may want to redirect the output to a file to make it easier to review it.  Some code tweaking may be necessary on your part in order to fix things.  Let me know if you have to make any such alterations so I can include the fix in future releases.
</p>
<p>
If you are unable to determine or fix the problem on your own, email me the following items (give me some warning if you're planning on sending a large attachment):
</p>
<p>
<ol>
<li>The version of Nagios you are running
<li>A description of what is going wrong and what you suspect is the problem
<li>The OS/distribution/version/architecture you're running Nagios on (i.e. RedHat Linux 7.2 for Intel)
<li>Your configuration files
<li>Output from the program run (with debugging options on)
</ol>
</p>
</td>
</tr>

<tr><td><br></td></tr>

</table>
</div>
</p>

<hr>

</body>
</html>
