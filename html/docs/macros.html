<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.0 Transitional//EN">

<html>
<head>
<title>Using Macros In Commands</title>

<STYLE type="text/css">
<!--
        .PageTitle { font-family: arial,serif; font-size: large; }
        .Default { font-family: arial,serif; font-size: small; }
-->      
</STYLE>

</head>

<body bgcolor="#FFFFFF" text="black" class="Default">

<p>
<div align="center">
<h2 class="PageTitle">Using Macros In Commands</h2>
</div>
</p>
<hr>

<p>
<strong><u>Macros</u></strong>
</p>

<p>
One of the features available in Nagios is the ability to use macros in command defintions.  Immediately prior to the execution of a command, Nagios will replace all macros in the command with their corresponding values.  This allows you to define a few generic commands to handle all your needs.  
</p>

<p>
<strong><u>Macro Validity</u></strong>
</p>

<p>
Although macros can be used in all commands you define, not all macros may be "valid" in a particular type of command.  For example, some macros may only be valid during service notification commands, whereas other may only be valid during host check commands.  There are nine types of commands that Nagios recognizes and treats differently.  They are as follows:
</p>
<p>
<ol>
<li>Service checks
<li>Service notifications
<li>Host checks
<li>Host notifications
<li>Service <a href="eventhandlers.html">event handlers</a> and/or a global service event handler
<li>Host <a href="eventhandlers.html">event handlers</a> and/or a global host event handler
<li><a href="configmain.html#ocsp_command">OCSP</a> command
<li>Service <a href="perfdata.html">performance data</a> commands
<li>Host <a href="perfdata.html">performance data</a> commands
</ol>
</p>

<p>
The table below lists all macros currently available in Nagios, along with a brief description of each and the types of commands in which they are valid.  If a macro is used in a command in which it is invalid, it is replaced with an empty string. It should be noted that macros consist of all uppercase characters and are enclosed in <b>$</b> characters.
</p>

<p>
<strong><u>Macro Availability Chart</u></strong>
</p>

<p>
<div align="center">
<table border="1" cellspacing=0 cellpadding=5>
<tr bgcolor="#cbcbcb">
<td><font size=-1><strong>Macro Name</strong></font></td>
<td><font size=-1><strong>Macro Description</strong></font></td>
<td><font size=-1><strong>Service Checks</strong></font></td>
<td><font size=-1><strong>Service Notifications</strong></font></td>
<td><font size=-1><strong>Host Checks</strong></font></td>
<td><font size=-1><strong>Host Notifications</strong></font></td>
<td><font size=-1><strong>Service Event Handlers &amp; Global Service Event Handler &amp; <a href="configmain.html#ocsp_command">OCSP</a> Command</strong></font></td>
<td><font size=-1><strong>Host Event Handlers &amp; Global Host Event Handler</strong></font></td>
<td><font size=-1><strong>Service Performance Data Commands</strong></font></td>
<td><font size=-1><strong>Host Performance Data Commands</strong></font></td>
</tr>
<tr>
<td><font size=-1><b>$CONTACTNAME$</b></font></td>
<td><font size=-1>Short name for the contact (i.e. "jdoe") that is being notified of a host or service problem</font></td>
<td>No</td><td bgcolor="#00ff00">Yes</td><td>No</td><td bgcolor="#00ff00">Yes</td><td>No</td><td>No</td><td>No</td><td>No</td>
</tr>
<tr>
<td><font size=-1><b>$CONTACTALIAS$</b></font></td>
<td><font size=-1>Long name/description for the contact (i.e. "John Doe") being notified</font></td>
<td>No</td><td bgcolor="#00ff00">Yes</td><td>No</td><td bgcolor="#00ff00">Yes</td><td>No</td><td>No</td><td>No</td><td>No</td>
</tr>
<tr>
<td><font size=-1><b>$CONTACTEMAIL$</b></font></td>
<td><font size=-1>Email address of the contact being notified</font></td>
<td>No</td><td bgcolor="#00ff00">Yes</td><td>No</td><td bgcolor="#00ff00">Yes</td><td>No</td><td>No</td><td>No</td><td>No</td>
</tr>
<tr>
<td><font size=-1><b>$CONTACTPAGER$</b></font></td>
<td><font size=-1>Pager number/address of the contact being notified</font></td>
<td>No</td><td bgcolor="#00ff00">Yes</td><td>No</td><td bgcolor="#00ff00">Yes</td><td>No</td><td>No</td><td>No</td><td>No</td>
<tr>
<td></td><td></td><td></td><td></td><td></td><td></td><td></td><td></td>
</tr>
<tr>
<td><font size=-1><b>$HOSTNAME$</b></font></td>
<td><font size=-1>Short name for the host (i.e. "biglinuxbox").  During a service notification, this refers to the host associated with the service.</font></td>
<td>No</td><td bgcolor="#00ff00">Yes</td><td>No</td><td bgcolor="#00ff00">Yes</td><td bgcolor="#00ff00">Yes</td><td bgcolor="#00ff00">Yes</td><td bgcolor="#00ff00">Yes</td><td bgcolor="#00ff00">Yes</td>
</tr>
<tr>
<td><font size=-1><b>$HOSTALIAS$</b></font></td>
<td><font size=-1>Long name/description for the host (i.e. "Big Linux Server")</font></td>
<td>No</td><td bgcolor="#00ff00">Yes</td><td>No</td><td bgcolor="#00ff00">Yes</td><td bgcolor="#00ff00">Yes</td><td bgcolor="#00ff00">Yes</td><td bgcolor="#00ff00">Yes</td><td bgcolor="#00ff00">Yes</td>
</tr>
<tr>
<td><font size=-1><b>$HOSTADDRESS$</b></font></td>
<td><font size=-1>The IP address of the host</font></td>
<td bgcolor="#00ff00">Yes</td><td bgcolor="#00ff00">Yes</td><td bgcolor="#00ff00">Yes</td><td bgcolor="#00ff00">Yes</td><td bgcolor="#00ff00">Yes</td><td bgcolor="#00ff00">Yes</td><td bgcolor="#00ff00">Yes</td><td bgcolor="#00ff00">Yes</td>
</tr>
<tr>
<td><font size=-1><b>$HOSTSTATE$</b></font></td>
<td><font size=-1>The current state of the host ("UP", "DOWN", or "UNREACHABLE")</font></td>
<td>No</td><td bgcolor="#00ff00">Yes</td><td>No</td><td bgcolor="#00ff00">Yes</td><td bgcolor="#00ff00">Yes</td><td bgcolor="#00ff00">Yes</td><td bgcolor="#00ff00">Yes</td><td bgcolor="#00ff00">Yes</td>
</tr>
<tr>
<td></td><td></td><td></td><td></td><td></td><td></td><td></td><td></td>
</tr>
<tr>
<td><font size=-1><b>$ARGn$</b></font></td>
<td><font size=-1>The nth argument passed to the service check command. Nagios supports up to 32 argument macros ($ARG1$ through $ARG32$).</font></td>
<td bgcolor="#00ff00">Yes</td><td>No</td><td>No</td><td>No</td><td>No</td><td>No</td><td>No</td><td>No</td>
</tr>
<tr>
<td></td><td></td><td></td><td></td><td></td><td></td><td></td><td></td>
</tr>
<tr>
<td><font size=-1><b>$SERVICEDESC$</b></font></td>
<td><font size=-1>The long name/description of the service being monitored (i.e. "Main Website")</font></td>
<td>No</td><td bgcolor="#00ff00">Yes</td><td>No</td><td>No</td><td bgcolor="#00ff00">Yes</td><td>No</td><td bgcolor="#00ff00">Yes</td><td>No</td>
</tr>
<tr>
<td><font size=-1><b>$SERVICESTATE$</b></font></td>
<td><font size=-1>The current status of the service being monitored ("WARNING", "UNKNOWN", "CRITICAL", or "OK")</font></td>
<td>No</td><td bgcolor="#00ff00">Yes</td><td>No</td><td>No</td><td bgcolor="#00ff00">Yes</td><td>No</td><td bgcolor="#00ff00">Yes</td><td>No</td>
</tr>
<tr>
<td><font size=-1><b>$OUTPUT$</b></font></td>
<td><font size=-1>The text output from the service or host check (i.e. "FTP ok - 1 second response time").   For service notifications and event handlers, this will contain the text output from the service check.  For host notifications and event handlers, this will contain the text output from the host check.</font></td>
<td>No</td><td bgcolor="#00ff00">Yes</td><td>No</td><td bgcolor="#00ff00">Yes</td><td bgcolor="#00ff00">Yes</td><td bgcolor="#00ff00">Yes</td><td bgcolor="#00ff00">Yes</td><td bgcolor="#00ff00">Yes</td>
</tr>
<tr>
<td><font size=-1><b>$PERFDATA$</b></font></td>
<td><font size=-1>This macro contains any <a href="perfdata.html">performance data</a> that may have been returned by the service or host check.</font></td>
<td>No</td><td bgcolor="#00ff00">Yes</td><td>No</td><td bgcolor="#00ff00">Yes</td><td bgcolor="#00ff00">Yes</td><td bgcolor="#00ff00">Yes</td><td bgcolor="#00ff00">Yes</td><td bgcolor="#00ff00">Yes</td>
</tr>
<tr>
<td><font size=-1><b>$EXECUTIONTIME$</b></font></td>
<td><font size=-1>This is the number of seconds that the host or service check took to execute  (i.e. the amount of time the check was executing).</font></td>
<td>No</td><td bgcolor="#00ff00">Yes</td><td>No</td><td bgcolor="#00ff00">Yes</td><td bgcolor="#00ff00">Yes</td><td bgcolor="#00ff00">Yes</td><td bgcolor="#00ff00">Yes</td><td bgcolor="#00ff00">Yes</td>
</tr>
<tr>
<td><font size=-1><b>$LATENCY$</b></font></td>
<td><font size=-1>This is the number of seconds that a service check lagged behind its scheduled check time.  For instance, if a check was scheduled for 03:04:15 and it didn't get executed until 03:14:17, there would be a check latency of 2 seconds.</font></td>
<td>No</td><td bgcolor="#00ff00">Yes</td><td>No</td><td>No</td><td bgcolor="#00ff00">Yes</td><td>No</td><td bgcolor="#00ff00">Yes</td><td>No</td>
</tr>
<tr>
<td><font size=-1><b>$NOTIFICATIONTYPE$</b></font></td>
<td><font size=-1>Identifies the type of notification that is being sent ("PROBLEM", "RECOVERY", or "ACKNOWLEDGEMENT").  </font></td>
<td>No</td><td bgcolor="#00ff00">Yes</td><td>No</td><td bgcolor="#00ff00">Yes</td><td>No</td><td>No</td><td>No</td><td>No</td>
</tr>
<tr>
<td><font size=-1><b>$NOTIFICATIONNUMBER$</b></font></td>
<td><font size=-1>The current notification number for the service or host.  The notification number increases by one (1) each time a new notification is sent out for a host or service (except for acknowledgements).  The notification number is reset to 0 when the host or service recovers (<i>after</i> the recovery notification has gone out).  Acknowledgements do not cause the notification number to increase.</font></td>
<td>No</td><td bgcolor="#00ff00">Yes</td><td>No</td><td bgcolor="#00ff00">Yes</td><td>No</td><td>No</td><td>No</td><td>No</td>
</tr>
<tr>
<td></td><td></td><td></td><td></td><td></td><td></td><td></td><td></td>
</tr>
<tr>
<td><font size=-1><b>$DATETIME$</b></font></td>
<td><font size=-1>Date/time stamp (i.e. <i>Fri Oct 13 00:30:28 CDT 2000</i>)</font></td>
<td>No</td><td bgcolor="#00ff00">Yes</td><td>No</td><td bgcolor="#00ff00">Yes</td><td bgcolor="#00ff00">Yes</td><td bgcolor="#00ff00">Yes</td><td bgcolor="#00ff00">Yes</td><td bgcolor="#00ff00">Yes</td>
</tr>
<tr>
<td><font size=-1><b>$SHORTDATETIME$</b></font></td>
<td><font size=-1>Date/time stamp (i.e. <i>10-13-2000 00:30:28</i>)</font></td>
<td>No</td><td bgcolor="#00ff00">Yes</td><td>No</td><td bgcolor="#00ff00">Yes</td><td bgcolor="#00ff00">Yes</td><td bgcolor="#00ff00">Yes</td><td bgcolor="#00ff00">Yes</td><td bgcolor="#00ff00">Yes</td>
</tr>
<tr>
<td><font size=-1><b>$DATE$</b></font></td>
<td><font size=-1>Date stamp (i.e. <i>10-13-2000</i>)</font></td>
<td>No</td><td bgcolor="#00ff00">Yes</td><td>No</td><td bgcolor="#00ff00">Yes</td><td bgcolor="#00ff00">Yes</td><td bgcolor="#00ff00">Yes</td><td bgcolor="#00ff00">Yes</td><td bgcolor="#00ff00">Yes</td>
</tr>
<tr>
<td><font size=-1><b>$TIME$</b></font></td>
<td><font size=-1>Time stamp (i.e. <i>00:30:28</i>)</font></td>
<td>No</td><td bgcolor="#00ff00">Yes</td><td>No</td><td bgcolor="#00ff00">Yes</td><td bgcolor="#00ff00">Yes</td><td bgcolor="#00ff00">Yes</td><td bgcolor="#00ff00">Yes</td><td bgcolor="#00ff00">Yes</td>
</tr>
<tr>
<td><font size=-1><b>$TIMET$</b></font></td>
<td><font size=-1>Time stamp in time_t format (seconds since the UNIX epoch)</font></td>
<td>No</td><td bgcolor="#00ff00">Yes</td><td>No</td><td bgcolor="#00ff00">Yes</td><td bgcolor="#00ff00">Yes</td><td bgcolor="#00ff00">Yes</td><td bgcolor="#00ff00">Yes</td><td bgcolor="#00ff00">Yes</td>
</tr>
<tr>
<td><font size=-1><b>$LASTCHECK$</b></font></td>
<td><font size=-1>This is a timestamp in time_t format (seconds since the UNIX epoch) indicating the time at which a service or host check was last performed.</font></td>
<td>No</td><td bgcolor="#00ff00">Yes</td><td>No</td><td bgcolor="#00ff00">Yes</td><td bgcolor="#00ff00">Yes</td><td bgcolor="#00ff00">Yes</td><td bgcolor="#00ff00">Yes</td><td bgcolor="#00ff00">Yes</td>
</tr>
<tr>
<td><font size=-1><b>$LASTSTATECHANGE$</b></font></td>
<td><font size=-1>This is a timestamp in time_t format (seconds since the UNIX epoch) indicating the time at which a service or host last changed state.</font></td>
<td>No</td><td bgcolor="#00ff00">Yes</td><td>No</td><td bgcolor="#00ff00">Yes</td><td bgcolor="#00ff00">Yes</td><td bgcolor="#00ff00">Yes</td><td bgcolor="#00ff00">Yes</td><td bgcolor="#00ff00">Yes</td>
</tr>
<tr>
<td></td><td></td><td></td><td></td><td></td><td></td><td></td><td></td>
</tr>
<tr>
<td><font size=-1><b>$ADMINEMAIL$</b></font></td>
<td><font size=-1>Email address for the local administrator (of the host doing the monitoring)</font></td>
<td bgcolor="#00ff00">Yes</td><td bgcolor="#00ff00">Yes</td><td bgcolor="#00ff00">Yes</td><td bgcolor="#00ff00">Yes</td><td bgcolor="#00ff00">Yes</td><td bgcolor="#00ff00">Yes</td><td bgcolor="#00ff00">Yes</td><td bgcolor="#00ff00">Yes</td>
</tr>
<tr>
<td><font size=-1><b>$ADMINPAGER$</b></font></td>
<td><font size=-1>Pager number/address for the local administrator</font></td>
<td bgcolor="#00ff00">Yes</td><td bgcolor="#00ff00">Yes</td><td bgcolor="#00ff00">Yes</td><td bgcolor="#00ff00">Yes</td><td bgcolor="#00ff00">Yes</td><td bgcolor="#00ff00">Yes</td><td bgcolor="#00ff00">Yes</td><td bgcolor="#00ff00">Yes</td>
</tr>
<tr>
<td></td><td></td><td></td><td></td><td></td><td></td><td></td><td></td>
</tr>
<tr>
<td><font size=-1><b>$STATETYPE$</b></font></td>
<td><font size=-1>The <a href="statetypes.html">state type</a> for the current service or host check ("HARD" or "SOFT").  Soft states occur when service or host checks return a non-OK state and are in the process of being retried.  Hard states result when service or host checks have been checked a specified maximum number of times.  Notifications are sent out only when hard state changes occur.</font></td>
<td>No</td><td>No</td><td>No</td><td>No</td><td bgcolor="#00ff00">Yes</td><td bgcolor="#00ff00">Yes</td><td bgcolor="#00ff00">Yes</td><td bgcolor="#00ff00">Yes</td>
</tr>
<tr>
<td><font size=-1><b>$SERVICEATTEMPT$</b></font></td>
<td><font size=-1>This refers to the number of the current service check retry.  For instance, if this is the second time that the service is being rechecked, this will be the number two.  Current attempt number is only useful when writing service <a href="eventhandlers.html">event handlers</a> for "soft" states that take a specific action based on the service retry number.</font></td>
<td>No</td><td>No</td><td>No</td><td>No</td><td bgcolor="#00ff00">Yes</td><td>No</td><td bgcolor="#00ff00">Yes</td><td>No</td>
</tr>
<tr>
<td><font size=-1><b>$HOSTATTEMPT$</b></font></td>
<td><font size=-1>This refers to the number of the current host check retry.  For instance, if this is the second time that the host is being rechecked, this will be the number two.  Current attempt number is only useful when writing host <a href="eventhandlers.html">event handlers</a> for "soft" states that take a specific action based on the host retry number.</font></td>
<td>No</td><td>No</td><td>No</td><td>No</td><td>No</td><td bgcolor="#00ff00">Yes</td><td>No</td><td bgcolor="#00ff00">Yes</td>
</tr>
<tr>
<td></td><td></td><td></td><td></td><td></td><td></td><td></td><td></td>
</tr>
<tr>
<td><font size=-1><b>$USERn$</b></font></td>
<td><font size=-1>The nth user-definable macro.  User macros can be defined in one or more <a href="configmain.html#resource_file">resource files</a> .  Nagios supports up to thrity-two user macros ($USER1$ through $USER32$).</font></td>
<td bgcolor="#00ff00">Yes</td><td bgcolor="#00ff00">Yes</td><td bgcolor="#00ff00">Yes</td><td bgcolor="#00ff00">Yes</td><td bgcolor="#00ff00">Yes</td><td bgcolor="#00ff00">Yes</td><td bgcolor="#00ff00">Yes</td><td bgcolor="#00ff00">Yes</td>
</tr>

</table>
</div>
</p>

<hr>

</body>
</html>
